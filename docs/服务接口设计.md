# 服务接口设计

## 判题服务

- 环境
    - apt/yosys
- 输入(input/)
    - file `module_reference.v` 参考答案
    - file `module_student.v` 用户编写的代码
    - files `testbench0.v` `testbench1.v` 每个测试点的测试文件
    - (尚未确定) 顶层模块的名称 顶层模块的输入输出
- 过程(temp/)
    - 使用`testbenchi.v`将用户编写的模块和参考模块分别跑一边仿真得到波形描述文件
    - 比较波形描述文件 一致则判对 不一致则判错
    - 使用波形文件生成WaveJSON
- 输出(output/)
    - str `log` 判题过程中输出的日志
    - str `error` 不出现错误此项为空 出现则保存错误说明
    - str `result` 判题结果
        - WA/AC等
    - json `wavejson` 信号波形图WaveJSON
        - 前端可以直接使用WaveDrom进行渲染

## 逻辑电路图生成 verilog2netlistsvg

- 环境
    - apt/yosys npm/netlistsvg
- 输入(input/)
    - files `sources` 单个或多个verilog文件
    - str `top_module` 顶层模块的名称
    - (尚未确定) 可以支持 https://github.com/nturley/netlistsvg#generating-input_json_file-with-yosys 提到的三种生成方式
- 过程(temp/)
    - yosys综合为一个.v文件
    - netlistsvg生成逻辑电路图
- 输出(output/)
    - file `netlist_svg` netlistsvg生成的svg文件
    - str `log` 判题过程中输出的日志
    - str `error` 不出现错误此项为空 出现则保存错误说明
